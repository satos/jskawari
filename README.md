# jskawari
華和梨のJavaScriptによるサブセット再実装 / subset of pseudo AI module 'KAWARI' implemented by JavaScript

## エントリ呼び出しについて

- 単語中の"${エントリ名}"はエントリ呼び出しで、単語エントリからランダムに１単語に置き換わる
- 一回の単語呼び出しの間、使用したエントリ呼び出しの履歴は${0}, ${1}, ...で再利用できる
- 単語中に"${エントリ1+エントリ2}"と書くと、エントリ呼び出し時にエントリ1およびエントリ2からランダムに１単語に置き換わる
    - このエントリの足し算には、2個以上のエントリも履歴エントリ（${0}や${1}のこと）も使える
- 単語中に"${インライン関数名:引数1( 引数2...)}"があった場合、これはインライン関数呼び出しとして機能し、javascriptで記述した関数に置き換わる
    - コロンより前の部分がインライン関数名になる
    - 引数はコロンより後の部分で、引数の間はスペースで分ける

## 使い方

CJS形式のモジュールとしてjskawariをインポート。
その後jskawari()でインスタンスを生成。インスタンスのメソッドを通じて操作する。

```javascript
var jskawari = require('./jskawari');
var dic = jskawari();
```

## 単語登録の方法(insert)

```javascript
dic.insert("単語エントリ名")("単語" [,"単語"...]);
```

- 単語と単語エントリ名はクォートで囲む

## 複数の単語エントリへの一括登録方法(loadobj)

```javascript
var dicobj = {
    "エントリ1": ["単語1", "単語2",... ],
    "エントリ2": ["単語3", "単語4",... ],
    ...
};
dic.loadobj(dicobj);

dic.loadobj({
    "word1": ["abc", "def", "ghi"],
    "word2": ["123", "456", "789"]
});
```
- JSONと互換性のある連想配列オブジェクトを引数として与えると、複数の単語エントリに一括して単語を登録する
- 連想配列のキーがエントリ名、バリューの配列が単語群になる
- 引数としてJSON.parse()の戻り値、require()で読み込んだJSONの使用を想定している

## 単語呼び出しの方法(call)
```javascript
dic.call("単語エントリ名");
```

- 指定した単語エントリからランダムに１単語を呼び出す

## 単語エントリの削除方法(clear)
```javascript
dic.clear("単語エントリ名");
```

- 指定した単語エントリを削除する

## 単語再登録の方法(set)
```javascript
dic.set("単語エントリ名")("単語" [,"単語"...]);
```

- 指定した単語エントリを一度削除した上で単語登録を行う。clear+insertと機能的に同じ
- 単語と単語エントリ名はクォートで囲む

## 単語検索の方法(find)
```javascript
dic.find("単語エントリ名", "単語");
```

- 指定した単語エントリ内に単語が存在すればtrue、なければfalseを返す

## 単語列挙の方法(enumerate)
```javascript
dic.enumerate("単語エントリ名");
```

- 指定した単語エントリに含まれる全ての単語を配列で返す

## インライン関数定義の方法(addfunc)
```javascript
dic.addfunc("インライン関数名")(javascriptの無名関数定義, またはjavascriptの関数名);
```

- 無名関数定義、または関数名を指定したインライン関数名に結びつける
- インライン関数名は単語中で、"${インライン関数名:引数1( 引数2...)}"の形式で呼び出す。
